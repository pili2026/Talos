model: "JY_DAM0816D"
type: "io_module"

# DAM0816D specifications:
# - 16-channel optocoupler input (5-24V)
# - 8-channel relay output (10A/30VDC or 10A/250VAC)
# - RS485/RS232 communication
# - Standard Modbus RTU protocol

# Default register_type (can be overridden at pin level)
register_type: discrete_input

capabilities:
  supports_on_off: false
  on_off_binding:
    targets: [
      "DOut01", "DOut02", "DOut03", "DOut04",
      "DOut05", "DOut06", "DOut07", "DOut08"
    ]
    on: 1
    off: 0

health_check:
  strategy: partial_bulk
  registers: [DIn01, DIn02, DIn03]
  timeout_ms: 3000
  retry_on_failure: 1
  register_type: discrete_input


register_map:
  # ==================== Digital Inputs (16 channels) ====================
  # Optocoupler isolated inputs (5-24V)
  # Modbus function code: 02 (Read Discrete Inputs)
  
  DIn01:
    offset: 0
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 1 / Optocoupler 1"
    unit: ""

  DIn02:
    offset: 1
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 2 / Optocoupler 2"
    unit: ""

  DIn03:
    offset: 2
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 3 / Optocoupler 3"
    unit: ""

  DIn04:
    offset: 3
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 4 / Optocoupler 4"
    unit: ""

  DIn05:
    offset: 4
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 5 / Optocoupler 5"
    unit: ""

  DIn06:
    offset: 5
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 6 / Optocoupler 6"
    unit: ""

  DIn07:
    offset: 6
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 7 / Optocoupler 7"
    unit: ""

  DIn08:
    offset: 7
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 8 / Optocoupler 8"
    unit: ""

  DIn09:
    offset: 8
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 9 / Optocoupler 9"
    unit: ""

  DIn10:
    offset: 9
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 10 / Optocoupler 10"
    unit: ""

  DIn11:
    offset: 10
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 11 / Optocoupler 11"
    unit: ""

  DIn12:
    offset: 11
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 12 / Optocoupler 12"
    unit: ""

  DIn13:
    offset: 12
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 13 / Optocoupler 13"
    unit: ""

  DIn14:
    offset: 13
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 14 / Optocoupler 14"
    unit: ""

  DIn15:
    offset: 14
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 15 / Optocoupler 15"
    unit: ""

  DIn16:
    offset: 15
    register_type: discrete_input
    readable: true
    writable: false
    format: u16
    description: "Digital Input 16 / Optocoupler 16"
    unit: ""

  # ==================== Digital Outputs (8 channels) ====================
  # Relay outputs (10A/30VDC or 10A/250VAC)
  # Modbus function code: 01 (Read Coils), 05 (Write Single Coil), 0F (Write Multiple Coils)
  
  DOut01:
    offset: 0
    register_type: coil
    readable: true
    writable: true
    format: u16
    description: "Digital Output 1 / Relay 1"
    unit: ""
    notes: "10A/30VDC or 10A/250VAC, durability: 100,000 cycles"

  DOut02:
    offset: 1
    register_type: coil
    readable: true
    writable: true
    format: u16
    description: "Digital Output 2 / Relay 2"
    unit: ""
    notes: "10A/30VDC or 10A/250VAC, durability: 100,000 cycles"

  DOut03:
    offset: 2
    register_type: coil
    readable: true
    writable: true
    format: u16
    description: "Digital Output 3 / Relay 3"
    unit: ""
    notes: "10A/30VDC or 10A/250VAC, durability: 100,000 cycles"

  DOut04:
    offset: 3
    register_type: coil
    readable: true
    writable: true
    format: u16
    description: "Digital Output 4 / Relay 4"
    unit: ""
    notes: "10A/30VDC or 10A/250VAC, durability: 100,000 cycles"

  DOut05:
    offset: 4
    register_type: coil
    readable: true
    writable: true
    format: u16
    description: "Digital Output 5 / Relay 5"
    unit: ""
    notes: "10A/30VDC or 10A/250VAC, durability: 100,000 cycles"

  DOut06:
    offset: 5
    register_type: coil
    readable: true
    writable: true
    format: u16
    description: "Digital Output 6 / Relay 6"
    unit: ""
    notes: "10A/30VDC or 10A/250VAC, durability: 100,000 cycles"

  DOut07:
    offset: 6
    register_type: coil
    readable: true
    writable: true
    format: u16
    description: "Digital Output 7 / Relay 7"
    unit: ""
    notes: "10A/30VDC or 10A/250VAC, durability: 100,000 cycles"

  DOut08:
    offset: 7
    register_type: coil
    readable: true
    writable: true
    format: u16
    description: "Digital Output 8 / Relay 8"
    unit: ""
    notes: "10A/30VDC or 10A/250VAC, durability: 100,000 cycles"

# ==================== Device Notes ====================
# Communication settings:
# - Default baud rate: 9600,n,8,1
# - Supported baud rates: 2400, 4800, 9600, 19200, 38400
# - Default device address: 0 (broadcast address: 254)
# - RS485: A/B terminals with optional GND for shield
# - RS232: Direct connection (RX-RX, TX-TX, GND-GND)
#
# Working modes (configurable via software):
# - Local non-latching mode: DI directly controls DO
# - Local self-latching mode: DI toggles DO state
# - Interlock mode: Only one DO active at a time
# - Dual-machine modes: Two devices linked for remote I/O
#
# Temperature range: -40°C to 85°C (industrial grade)
# Dimensions: 145×94×41mm
# Weight: 330g